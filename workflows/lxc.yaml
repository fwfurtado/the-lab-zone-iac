workflows:
  apply-all:
    description: "Apply all infrastructure stacks"
    steps:
      - command: terraform apply lxc -s tailscale -auto-approve
      - command: terraform apply lxc -s traefik -auto-approve

  destroy-all:
    description: "Destroy all infrastructure stacks"
    steps:
      - command: terraform destroy lxc -s tailscale -auto-approve
      - command: terraform destroy lxc -s traefik -auto-approve

  plan-all:
    description: "Plan all infrastructure stacks"
    steps:
      - command: terraform plan lxc -s tailscale
      - command: terraform plan lxc -s traefik

  validate-all:
    description: "Validate all infrastructure stacks"
    steps:
      - command: terraform validate lxc -s tailscale
      - command: terraform validate lxc -s traefik

  lint-all:
    description: "Lint all infrastructure stacks"
    steps:
      - command: terraform fmt -check=true lxc -s tailscale
      - command: terraform fmt -check=true lxc -s traefik
